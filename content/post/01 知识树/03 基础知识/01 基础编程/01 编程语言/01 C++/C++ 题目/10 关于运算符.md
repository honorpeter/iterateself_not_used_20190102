---
title: 10 关于运算符
toc: true
date: 2018-08-28
---



## 运算导致的溢出




#### Q 16 :

题目：
给定3个int类型的正整数x，y，z，对如下4组表达式判断正确的选项：

```
int a1 = x + y - z; int a2 = x - z + y;
int b1 = x * y / z; int b2 = x / z * y;
int c1 = x << y >> z; int c2 = x >> z << y ;
int d1 = x & y | z; int d2 = x | z & y;
```

答案:
a1一定等于a2

解答:
考察对变量运算原理的了解。
1. 加减操作虽然可能出现溢出，但相同操作数的不同顺序只是中间结果不同，最终结果相同。<span style="color:red;">这个不知道</span>
2. int类型做除法可能会造成截断，比如3/2 = 1。
3. 移位运算可能会丢弃超出的位数。有符号数二进制数1111 1111，先左移2位再右移三位为1111 1111，反之1111 1100。


## 运算符优先级

#### Q 9 :

题目：

设 x、y、t 均为 int 型变量，则执行语句：t = 3; x = y = 2; t = x++ || ++y; 后，变量t和y的值分别为：

答案:

t = 1
y = 2

解答:

考察逻辑短路和运算符优先级。

1*. =的优先级最低，t = (x++ || ++y) = 1。
2. x++和++y为或关系，因为x++的值非0，所以++y不执行，y不变。<span style="color:red;">第一个没想到的是：或不是按位运算，而是直接对值进行运算的，第二个没想到的是，因为 x++ 非0，所以 ++y 不执行运算。</span>
pan>



#### Q 32 :

题目：

```
int i=10, j=10, k=3;
k*=i+j;
```

k最后的值是？

答案:

60

解答:

考察运算符优先级。

1. +优先级高于*=，等价于k = k * (i +j)。





#### Q 48 :

题目：
下面程序输出结果为？
```
#include<iostream.h>
#define SUB(X,Y) (X)*Y
int main(){
    int a = 3, b = 4;
    cout << SUB(a++, ++b);
    return 0;
}
```

答案：
15

解答：
考察宏定义命令和自加运算。
1. SUB(3++, ++4) = (3++) * ++4 = 3 * 5 =15
2. 3++是否有括号并不影响，后置自增变量值在本条语句结束前（分号之前）均不改变。
3. 前置自增值在本条语句内立即改变且自增优先级高于*。







#### Q 51 :

题目：
以下代码执行后，val的值是：
```
unsigned long val = 0;
char a = 0x48;
char b = 0x52;
val = b << 8 | a;
```

答案：
21064

解答：
考察默认类型转换和移位运算及优先级。
1. 移位运算>>优先级高于|，val = (b << 8) | a;
2. 类型转换：
    运算前转换：
        char/short -> int
        float -> double
        这里的b << 8计算时先需要把char转为int（b << 8 = 0x00005200, a = 0x00000048）
    运算中转换：
        int -> long -> unsigned -> double
3. val = 0x00005248 =  21064






#### 逗号运算符

题目：
以下程序的输出结果为：

```
#include "stdio.h"
int func(int x, int y){
    return (x + y);
}
int main(){
    int a = 1, b = 2, c = 3, d = 4, e = 5;
    printf(" %d\n", func((a + b, b + c, c + a), (d, e)));
    return 0;
}
```

答案：
9

解答：
考察逗号运算符。
1. 逗号表达式的结果是其最右边表达式的值。
2. (a + b, b + c, c + a)取最右边的值c + a = 4，(d, e)取最右边的值e = 5。<span style="color:red;">这个之前不知道</span>
