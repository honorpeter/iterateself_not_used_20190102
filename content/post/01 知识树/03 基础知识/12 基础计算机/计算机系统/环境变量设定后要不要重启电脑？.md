---
title: 环境变量设定后要不要重启电脑？
toc: true
date: 2018-08-03 20:06:29
---
# 环境变量设定后要不要重启电脑？

## 问题缘由：


经常在配置opencv活着ffmpeg或者graphviz的时候要设定环境变量，但是有的时候设置后需要重启电脑，有的时候却好像不需要，直接设定完之后就可以了，到底要不要重启电脑？这个问题在每次有环境变量需要设定的时候都有点忐忑不安。。总是不知道到底是不是真的生效了？如果没生效是我设置错了还是怎么回事？

而且，设置用户的Path与系统的Path有什么区别？只使之系统的Path可不可以？而且为什么要设定在Path里面，我新建一个新的配置行不行？


## 解答：




### 1.到底在设置环境变量之后要不要重启电脑？如果不重启电脑，有什么别的方法可以确保环境变量一定更新吗？


在电脑属性中设置环境变量以后，之后启动的程序和线程会生效，而对之前驻留内存的程序不起作用。看来设定好环境变量之后，重启电脑是有必要的。

如果不重启电脑的话，那么可以用如下两种方法：

1.先 kill explorer.exe， 再 启动explorer.exe 可以起到刷新配置的作用。

2.win+R->cmd 启动 cmd.exe ，输入：set PATH=C: ，关闭DOS窗口。再次打开DOS窗口，输入：echo %PATH% ，可以发现“我的电脑”->“属性”->“高级”->“环境变量”中设置的 PATH 值已经生效。但是这个时候不用担心DOS窗口中的修改会影响环境变量的值，因为DOS窗口中的环境变量只是Windows环境变量的一个副本而已。但是对这个副本的修改却会引发Windows环境变量的刷新，而这正是我们想要的，这样的刷新就可以确保我们之前通过高级系统配置设定的环境变量得到刷新，从而起到类似重启电脑的效果。

**注：上面两种方法并没有实践过，是从搜索结果中总结的，后续有实践之后进行更新。**


### 2.用户的Path与系统的Path有什么区别？只使之系统的Path可不可以？


看了一圈，大概是系统的Path的修改可能会影响到别的用户，那么这样的话，对于自己的电脑来说，看来可以直接修改系统的Path，而不用修改用户的Path。


### 3.一定要将地址配置到Path里面吗？新建一个环境变量可以吗？


之前我在装opencv的时候，为了方便项目代码分享除去的时候的vs的配置可以固定不变，而不需要重新在vs里面去设定opencv的地址，因此在系统里面新建了环境变量 opencvBuild ，这样在VS里面就可以直接通过 $(opencvBuild) 来指代我环境变量设定的地址。如果别人clone项目代码想运行，就直接在自己的电脑上安装好opencv然后新建一个opencvBuild的环境变量，地址写成自己的opencv的地址即可。
